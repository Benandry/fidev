{% block stylesheet %}
  <style>
    .suggestion{
      font-size: 14px;
    }
    .suggestion:hover{
      background-color: cornflowerblue;
      color: #fff;
    }
  </style>
{% endblock %}
{{ form_start(form) }}
<div class="container" style="color:black;">
  <h2>Individuel</h2>
  <span id="user">{{ app.user.id }}</span>
  <br>
  <h1><a href="{{ path('app_individuel_index') }}" class="btn btn-success"><i class="fa fa-list"></i> Listes des clients </a></h1>
  <!-- Nav tabs -->
  <ul class="nav nav-pills" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="pill" href="#home">Etat Civile</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="pill" href="#menu1">Famille</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="pill" href="#menu2">Adresse</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="pill" href="#menu3">Etude</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="pill" href="#menu4">Groupe</a>
    </li>
        <li class="nav-item">
      <a class="nav-link" data-toggle="pill" href="#menu5">Identite</a>
    </li>
        </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div id="home" class="container tab-pane active row jumbotron jumbotron-fluid"><br>
      <div class="col-sm-5">
          {{ form_row(form.photo) }}
          {{ form_row(form.nom_client) }}
          {{ form_row(form.prenom_client) }}
          {{ form_row(form.sexe) }}
          {{ form_row(form.titre) }}
      </div>
      <div class="col-sm-5">
          {{ form_row(form.date_naissance) }}
          <span class="alert alert-info " id="age"> </span>
          {{ form_row(form.lieu_naissance) }}
          {{ form_row(form.numero_mobile) }}
      </div>
      <div class="col-sm-5">
          {{ form_row(form.profession) }}
      </div>
      <div class="col-sm-5">
          {{ form_row(form.nom_conjoint) }}
      </div>
      <div class="col-sm-5">
          {{ form_row(form.date_inscription) }}
      </div>
      <div class="col-sm-5">
          {{ form_row(form.Agence) }}
      </div>
    </div>
    <div id="menu1" class="container tab-pane fade row jumbotron jumbotron-fluid"><br>
            <div class="col-sm-5">
              {{ form_row(form.parent_nom) }}
              {{ form_row(form.nb_enfant) }}
              {{ form_row(form.nb_personne_charge) }}
            </div>
            <div class="col-sm-5">
              {{ form_row(form.parent_adresse) }}
              {{ form_row(form.etatcivile) }}
            </div>
    </div>
    <div id="menu2" class="container tab-pane fade row jumbotron jumbotron-fluid"><br>
            <div class="col-sm-5">
              {{ form_row(form.adressephysique) }}
            </div>
            <div class="col-sm-5">
              {{ form_row(form.commune) }}
              <div id="commune_suggest"></div>
            </div>
    </div>
    <div id="menu3" class="container tab-pane fade row jumbotron jumbotron-fluid"><br>
            <div class="col-sm-5">
              {{ form_row(form.etude) }}
            </div>
    </div>

        <div id="menu4" class="container tab-pane fade row jumbotron jumbotron-fluid"><br>
            <div class="col-sm-5">
          {{ form_row(form.MembreGroupe) }}
            </div>
            <div class="col-sm-5">
          {{ form_row(form.TitreGroupe) }}
            </div>
            <div class="col-sm-5">
          {{ form_row(form.dateadhesion) }}
            </div>
    </div>

      <div id="menu5" class="container tab-pane fade row jumbotron jumbotron-fluid"><br>
        <div class="col-sm-5">
          {{ form_row(form.TypeIdentite) }}
          {{ form_row(form.cin) }}
          </div>
          <div class="col-sm-5">
            {{ form_row(form.datecin) }}
            {{ form_row(form.dateexpiration) }}
            {{ form_row(form.lieudelivrance) }}
            <div id="individuel">
              {{ form_row(form.codeclient) }}
            </div>
            <div class="user-log">
              {{ form_row(form.user) }}
            </div>
           
            
          </div> 

            <div class="col-sm-2 mt-5">
               <h1><a href="{{ path('app_individuel_index') }}" class="btn btn-success"><i class="fa fa-book"></i> Recherhce</a></h1>
                {{ form_row(form.Sauvegarder) }}
            </div>
      </div>
        </div>
    </div>


  </div>

</div>
{% block javascript  %}
    <script>
      const url_api ='/api/commune-madagascar';

      const search_input = document.getElementById('individuelclient_commune')

      search_input.addEventListener('keyup',()=>{
        const value_input = search_input.value
        
        $.ajax({
              url: url_api,
              method: "GET",
              dataType : "json",
              contentType: "application/json; charset=utf-8",
              data : JSON.stringify(),
              success: function(result){

                    const getValue = result.filter(i => i.Commune.toLocaleLowerCase().includes(value_input.toLocaleLowerCase()))
                    console.log(getValue)

                    var suggestion = ''

                    if( value_input != ''){
                        getValue.forEach(resultItem =>{
                        
                          suggestion += `<div class="suggestion">${resultItem.Commune}</div>`
                        })
                    }else{
                      suggestion = '<div class="suggestion"> Pas de commune</div>'
                    }

                    document.getElementById('commune_suggest').innerHTML = suggestion
                  
          
              },
              error: function (request, status, error) {
                  console.log(request.responseText);
              }

          });  
          
          
          
      })
    </script>
{% endblock %}
{{ form_end(form) }}